# Testo helper

Плагин для Visual Studio Code, который упрощает работу с файлами `.testo`. Поддерживает подсветку синтаксиса `Testo` языка, сниппеты, открытие тест-кейсов в Jira из контекстного меню, переход к определениям макросов или включаемых файлов с помощью `Ctrl+Click` или `F12`, а также форматирование кода (с правильными отступами) для файлов `.testo`. Плагин уведомляет об обновлениях и cодержиит кастомные иконки для файлов `.testo` в проводнике.


## Возможности

- **Подсветка синтаксиса**:
  - Полноценная поддержка синтаксиса языка Testo, включая ключевые слова, макросы и конструкции.
  - Позаимствовано у плагина [Testo VScode Helper](https://github.com/Maviroti/testo_vscode_helper). 
- **Сниппеты**:
  - Готовые конструкции для ускорения написания кода. Например, введите `forr` и нажмите `Tab`, чтобы вставить шаблон цикла `for`. Предлагайте свои варианты - добавлю :) 
- **Открытие тест-кейсов в Jira**:
  - Щёлкните правой кнопкой мыши на файле `.testo` (например, `PROJECT-T1234.testo`) в проводнике или на заголовке редактора и выберите "Open in Jira". Плагин сформирует ссылку, используя базовый URL из настроек, и откроет её в браузере.
- **Переход к определениям**:
  - Нажмите `Ctrl+Click` или `Shift+F12` на директиве `include` (например, `include "../../macro.testo"`) — откроется указанный файл.
  - Нажмите `Ctrl+Click` или `Shift+F12` на вызове макроса (например, `loginu ()`) — плагин найдет определение (`macro loginu () {`) в текущем или включаемых файлах.
- **Игнорирование ненужных строк**:
  - Строки, начинающиеся с `macro` (например, `macro loginu () {`), не обрабатываются как вызовы макросов.
  - Ключевые слова (`if`, `for`, `while`, etc.) игнорируются.
- **Форматирование кода (Beta)**:
  - Щёлкните правой кнопкой мыши в редакторе файла `.testo` и выберите "Format Testo Document (Beta)" для автоматического форматирования кода.
  - Возможности форматирования:
    - Устанавливает отступы в 4 пробела для блоков внутри `{}`.
    - Удаляет `;` в конце строк, кроме комментариев (начинающихся с `#`).
    - Оставляет не более одной пустой строки между секциями, пустые строки без пробельных символов.
    - Игнорирует `{` и `}` в комментариях при расчёте вложенности.
    - Удаляет пустые строки в конце файла.
  - **Примечание**: Это бета-версия, возможны недоработки. Если найдете, попробуйте связаться с автором плагина и рассказать об этом.
- **Работа только с `.testo`**:
  - Все функции доступны только для файлов с расширением `.testo`.

## Настройка

Для корректной работы функции "Open in Jira" необходимо настроить базовый URL для вашей Jira.

### Настройка базового URL

1. Откройте настройки VS Code:
   - Windows/Linux: `Ctrl+,`
   - Mac: `Cmd+,`
2. В поиске введите `testoHelper.jiraBaseUrl`.
3. Укажите базовый URL для вашей Jira, например: `https://jira.company.ru/secure/Tests.jspa#/testCase/`

**Важно**: URL должен заканчиваться слешем (`/`), так как плагин добавляет идентификатор тест-кейса (например, `PROJECT-T1234`) к этому URL.